---
title: "Pydanticã§å¸¸ã«Fieldã®Validationã‚’è¡Œã†"
emoji: "ğŸ˜¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "pydantic"]
published: true
---

# Pydantic ã¨ã¯

https://pydantic-docs.helpmanual.io/

```
Data validation and settings management using python type annotations.

pydantic enforces type hints at runtime, and provides user friendly errors when data is invalid.

Define how data should be in pure, canonical python; validate it with pydantic
```

Pydanticã¯ã€Pythonã®å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã€å®Ÿè¡Œæ™‚ã«ãŠã‘ã‚‹å‹ãƒ’ãƒ³ãƒˆã‚’æä¾›ã—ãŸã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼è¨­å®šã‚’ç°¡å˜ã«æä¾›ã—ã¦ãã‚Œã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

## åŸºæœ¬çš„ãªåˆ©ç”¨æ³•

ã“ã‚Œã‚‰ã¯å‰²æ„›ã€‚
ã“ã®è¨˜äº‹ã«å‚™å¿˜éŒ²ãŒã¦ã‚‰æ›¸ã„ã¦ãŠããŸã„ã®ã¯
Modelã‚’å®šç¾©ã—ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãŸå¾Œã§ã‚‚Validationã‚’å‹•ä½œã•ã›ã‚‹æ–¹æ³•


### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œ

```python
from pydantic import BaseModel, Field,validator
from typing import Optional

class DemoModel(BaseModel):

    name: int
    addr: int

hoge = DemoModel(name=1, addr=2)
print(hoge)
hoge.name = "str"
```

å®Ÿã¯ã“ã‚Œå‹•ä½œã—ã¦ã—ã¾ã†ã€‚

```bash
name=1 addr=2
```

ã“ã®ã¾ã¾ã§ã¯ã€ReturnValueã®ç®±ã‚’ä½œã£ã¦ç½®ã„ã¦
å¾Œã‹ã‚‰é †ã«å€¤ã‚’å…¥åŠ›ã—ã¦æœ€å¾Œã«è¿”ã™ã€‚ã¿ãŸã„ãªä½¿ã„æ–¹ã‚’ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ä½¿ãˆãªã„ã€‚
å¾Œã‹ã‚‰å€¤ã‚’æ›´æ–°ã™ã‚‹éš›ã«ã‚‚ValidationãŒã‹ã‹ã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ

### æ”¹å®šæ¡ˆ

ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚

```python
from pydantic import BaseModel, Field,validator
from typing import Optional

class DemoModel(BaseModel):

    name: int
    addr: int

    class Config:
        validate_assignment = True

hoge = DemoModel(name=1, addr=2)
print(hoge)
hoge.name = "str"
```

```bash
---------------------------------------------------------------------------
ValidationError                           Traceback (most recent call last)
<ipython-input-18-07aede28b224> in <module>
     12 hoge = DemoModel(name=1, addr=2)
     13 print(hoge)
---> 14 hoge.name = "str"

/usr/local/lib/python3.8/dist-packages/pydantic/main.cpython-38-x86_64-linux-gnu.so in pydantic.main.BaseModel.__setattr__()

ValidationError: 1 validation error for DemoModel
name
  value is not a valid integer (type=type_error.integer)

```

ã“ã®ã‚ˆã†ã«ç„¡äº‹ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
